<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Distributed Artificial Intelligence">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Spacebeam (publicaciones antiguas, página 2) | Spacebeam</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" hreflang="es" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" hreflang="en" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (ko)" hreflang="ko" href="../../ko/rss.xml">
<link rel="canonical" href="https://spacebeam.org/es/posts/index-2.html">
<link rel="icon" href="../../images/logo.png" sizes="128x128">
<link rel="prev" href="index-3.html" type="text/html">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><!-- Font Awesome --><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../">

            <span id="blog-title">Spacebeam</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../consultancy/#work" class="nav-link">Consultancy</a>
                </li>
<li class="nav-item">
<a href="../../technology/" class="nav-link">Technology</a>
                </li>
<li class="nav-item">
<a href="../../community/" class="nav-link">Community</a>
                </li>
<li class="nav-item">
<a href="../../contact/#us" class="nav-link">Contact Us</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item">
<a href="../../posts/" class="nav-link">Blog</a>

                
                    </li>
<li>
            </li>
<li class="nav-item"><a href="../../" rel="alternate" hreflang="en" class="nav-link">English</a></li>
            <li class="nav-item"><a href="../../ko/" rel="alternate" hreflang="ko" class="nav-link">한국어</a></li>

                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="school-for-zergs/" class="u-url">School for Zergs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="school-for-zergs/" rel="bookmark">
            <time class="published dt-published" datetime="2022-03-04T10:21:57-06:00" itemprop="datePublished" title="2022-03-04 10:21">2022-03-04 10:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This project is a paid project, where people contribute money to fund for korean zerg guides being translated.</p>
<p>help us fund future videos!</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="love2d/" class="u-url">Love2d</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="love2d/" rel="bookmark">
            <time class="published dt-published" datetime="2021-08-23T16:02:59-06:00" itemprop="datePublished" title="2021-08-23 16:02">2021-08-23 16:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Mysterious Mysteries    </p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="how-to-cut-and-trim-video/" class="u-url">How To Cut and Trim Video</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="how-to-cut-and-trim-video/" rel="bookmark">
            <time class="published dt-published" datetime="2021-03-03T19:02:09-06:00" itemprop="datePublished" title="2021-03-03 19:02">2021-03-03 19:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The following command is used to trim video in FFmpeg. The stream copy enables to trim video without re-encoding and meanwhile keeps original quality for the output video.</p>
<p><code class="docutils literal">`
.. code:: bash
ffmpeg <span class="pre">-i</span> input.mp4 <span class="pre">-ss</span> 00:01:23 <span class="pre">-to</span> 00:04:20 <span class="pre">-c</span> copy output.mp4
`</code></p>
<aside class="system-message"><p class="system-message-title">System Message: ERROR/3 (<span class="docutils literal">&lt;string&gt;</span>, line 8)</p>
<p>Content block expected for the "code" directive; none found.</p>
<pre class="literal-block">.. code:: bash</pre>
</aside><aside class="system-message"><p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">&lt;string&gt;</span>, line 9)</p>
<p>Explicit markup ends without a blank line; unexpected unindent.</p>
</aside><p>ffmpeg -i input.mp4 -ss 00:01:23 -to 00:04:20 -c copy output.mp4</p>
<p>-c copy trim via stream copy, which is fast and will not re-encode video.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="8-supply-11-gas-12-rax-14-scout/" class="u-url">8 Supply, 11 Gas, 12 Rax, 14 Scout</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="8-supply-11-gas-12-rax-14-scout/" rel="bookmark">
            <time class="published dt-published" datetime="2020-08-11T19:56:29-06:00" itemprop="datePublished" title="2020-08-11 19:56">2020-08-11 19:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let's train some workers when we have the minerals for them!</p>
<p>That's the basics you go out, 16 supply, 16 factory, train 2 marines and put them with 1 scv at front on the ramp, 22 cc, 24 supply, 25 tank, 26 ebay.</p>
<p>This tutorial will walk you through StarCraft: Brood War bot development with Python, but first we are going to dive deep into <a href="https://en.wikipedia.org/wiki/Coroutine">Coroutines</a>!</p>
<p>Real-time strategy (RTS) games are known to be one of the most complex game genres for humans and machines to play. To tackle the task we focus on a message-passing divide-and-conquer approach with <a href="https://zeromq.org">ZMQ</a> and multiple languages, splitting the game into separate components and developing separate systems to solve each task.</p>
<p>This trend gives rise to a new problem: how to tie these systems together into a functional StarCraft: Brood War playing bot?</p>
<h3>Coroutines</h3>
<p><em>Coroutines</em> are computer-program components that generalize subroutines for non-preemptive multitasking by allowing multiple entry points for suspending and resuming execution at certain locations.</p>
<p>Subroutines are short programs that perform functions of a general nature that can occuir in varios types of computation.</p>
<p>A sequence of program instructions that perform a specific task, packaged as a unit. This unit can then be used in programs wherever that particular task should be performed.</p>
<p>Subprograms may be defined within programs, or separately in libraries that can be used by multiple programs.</p>
<p>In different programming languages, a subroutine may be called a procedure, a function a routine, a method, a subprogram.</p>
<h4>Difference with processes</h4>
<p>Processes are idependent units of execution, a subroutine lives inside a process.</p>
<h4>Cooperative multitasking</h4>
<p>Also known as non-preemptive multitasking, is a style of computer multitasking in which the operating system never initiates a context switch from a running process to another process.</p>
<p>Instead, processes voluntary yield control periodically or when idle in order to enable multiple applications to be run concurrently.</p>
<h3>Python 3 <code>await</code> and <code>yield</code>
</h3>
<p>Python uses a single-threaded event loop to enable concurrent actions. This means that all real-time aplication code should aim to be asynchronous and non-blocking because only one operation can be active at a time.</p>
<p>Asynchronous operations generally return placeholder objects (<a href="https://docs.python.org/3.7/library/concurrent.futures.html">Futures</a>).
<code>Futures</code> are usually transformed into their result with the <code>await</code> and <code>yield</code>.</p>
<h4>Examples</h4>
<p>Here is a sample synchronous function:</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="kn">from</span> <span class="nn">tornado.httpclient</span> <span class="kn">import</span> <span class="n">HTTPClient</span>

<span class="k">def</span> <span class="nf">synchronous_fetch</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">http_client</span> <span class="o">=</span> <span class="n">HTTPClient</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
</pre></div>

<p>And here the same rewritten asynchronously as a native coroutine:</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="kn">from</span> <span class="nn">tornado.httpclient</span> <span class="kn">import</span> <span class="n">AsyncHTTPClient</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">asynchronous_fetch</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">http_client</span> <span class="o">=</span> <span class="n">AsyncHTTPClient</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
</pre></div>

<p>Anything you can do with coroutines you can also do by passing callback around, but coroutines
provide an important simplification by letting you organize your code in the same way you would if it
were synchronous, important for error handling since <code>try/expect</code> work as you would expect.</p>
<h3>Why ZeroMQ helps?</h3>
<p>ZeroMQ is a community of projects focused on decentralized message passing. They agree on protocols (RFCs) for connecting to each other and exchanging messages. Messages are blobs of useful data of any reasonable size.</p>
<p>You can use this feature to queue, route, and filter messages according to various <code>patterns</code>.</p>
<p>Multilingual Distributed Messaging thanks to the ZeroMQ Community.</p>
<ul>
<li>Carries messages across inproc, IPC, TCP, multicast.</li>
<li>Smart patterns like pub-sub, push-pull, request-reply.</li>
<li>Backed by a large and active open-source community.</li>
</ul>
<p>It's asynchronous I/O model gives you scalable multicore applications, built as asynchronous message-processing subroutines. <a href="http://zguide.zeromq.org/">Read the guide</a>.</p>
<h3>Coroutines again</h3>
<p>Coroutines are the recommended way to write asynchronous code.</p>
<p><em>Coroutines</em> use the Python 3 <code>await</code> or <code>yield</code> keyword to suspend and resume execution instead of a chain of callbacks, all coroutines use explicit context switches and are called as asynchronous functions.</p>
<p>Coroutines are almost as simple as synchronous code, but without the expense of a thread. They make concurrency easier to reason about by reducing the number of places where a context switch can happen.</p>
<h4>How to call a coroutine</h4>
<p>Coroutines do not raise exceptions in the normal way: any exception they raise will be trapped in the awaitable object until it is yielded.
This means it is important to call coroutines in the right way, or you may have errors that do unnoticed:</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">async</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">divide</span><span class="ss">(</span><span class="nv">x</span>,<span class="w"> </span><span class="nv">y</span><span class="ss">)</span>:<span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">y</span><span class="w"></span>

<span class="nv">def</span><span class="w"> </span><span class="nv">bad_call</span><span class="ss">()</span><span class="w"></span>
<span class="w">    </span>#<span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">raise</span><span class="w"> </span><span class="nv">ZeroDivisionError</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">won</span><span class="err">'t</span>
<span class="err">    # because the coroutine is called incorrectly!</span>
<span class="err">    divide(1, 0)</span><span class="w"></span>
</pre></div>

<p>In nearly all cases, any function that calls a coroutine must be a coroutine itself, 
and use the <code>await</code> or <code>yield</code> keyword in the call.</p>
<div class="code"><pre class="code literal-block">:::python
async def good_call():
    # await will unwrap the object returned by divide()
    # and raise the expection.
    await divide(1, 0)
</pre></div>

<h5>Fire and forget</h5>
<p>Sometimes you may want to "fire and forget" a coroutine without waiting for its result. In this case it is recommended to use <code>IOLoop.spawn_callback</code>, which makes the <code>IOLoop</code> responsible for the call.
If it fails, the <code>IOLoop</code> will log a stack trace:</p>
<div class="code"><pre class="code literal-block">:::python
# The IOLoop will catch the expection and print a stack trace
# in the logs. Note that this doesn't look like a normal call,
# since we pass the function object to be called by the IOLoop.
IOLoop.current().spawn_callback(divide, 1, 0)
</pre></div>

<h3>Coroutine patterns</h3>
<h4>Calling blocking functions</h4>
<p>The simplest way to call a blocking function from a coroutine is to use <code>IOLoop.run_in_executor</code>, which returns <code>Futures</code> that are compatible:</p>
<div class="code"><pre class="code literal-block">:::python
async def call_blocking():
    await IOLoop.current().run_in_executor(None, blocking_func, args)
</pre></div>

<h4>Parallelism</h4>
<p>The <code>multi</code> function accepts lists and dicts whose values are <code>Futures</code> and waits for all of those <code>Futures</code> in parallel:</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="kn">from</span> <span class="nn">tornado.gen</span> <span class="kn">import</span> <span class="n">multi</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">parallel_fetch</span><span class="p">(</span><span class="n">url1</span><span class="p">,</span> <span class="n">url2</span><span class="p">):</span>
    <span class="n">resp1</span><span class="p">,</span> <span class="n">resp2</span> <span class="o">=</span> <span class="k">await</span> <span class="n">multi</span><span class="p">([</span><span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url1</span><span class="p">),</span>
                                <span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url2</span><span class="p">)]</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">parallel_fetch_many</span><span class="p">(</span><span class="n">urls</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">multi</span><span class="p">([</span><span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">])</span>
    <span class="c1"># res is a list of HTTPResponses in the same order</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">parallel_fetch_dict</span><span class="p">(</span><span class="n">urls</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">multi</span><span class="p">({</span><span class="n">url</span><span class="p">:</span> <span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                      <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">})</span>
    <span class="c1"># res is a dict {url: HTTPResponse}</span>
</pre></div>

<p>In decorated coroutines, it is possible to <code>yield</code> the list or dict directly:</p>
<div class="code"><pre class="code literal-block"><span class="o">::</span><span class="err">:</span><span class="n">python</span><span class="w"></span>
<span class="nv">@gen</span><span class="p">.</span><span class="n">coroutine</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">parallel_fetch_decorated</span><span class="p">(</span><span class="n">url1</span><span class="p">,</span><span class="w"> </span><span class="n">url2</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="n">resp1</span><span class="p">,</span><span class="w"> </span><span class="n">resp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yield</span><span class="w"> </span><span class="o">[</span><span class="n">http_client.fetch(url1),</span>
<span class="n">                          http_client.fetch(url2)</span><span class="o">]</span><span class="w"></span>
</pre></div>

<h4>Interleaving</h4>
<p>Sometimes it is useful to save a <code>Future</code> instead of yielding it immediately, so you can start another operation before waiting.</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="kn">from</span> <span class="nn">tornado.gen</span> <span class="kn">import</span> <span class="n">convert_yielded</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># convert_yielded() starts the native coroutine in the background.</span>
    <span class="c1"># This is equivalent to asyncio.ensure_future() (both work)</span>
    <span class="n">fetch_future</span> <span class="o">=</span> <span class="n">convert_yielded</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fetch_next_chunk</span><span class="p">())</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">fetch_future</span>
        <span class="k">if</span> <span class="n">chunk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">fetch_future</span> <span class="o">=</span> <span class="n">convert_yielded</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fetch_next_chunk</span><span class="p">())</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>

<p>This is a little easier to do with decorated coroutines, because they start immediately when called:</p>
<div class="code"><pre class="code literal-block"><span class="o">::</span><span class="err">:</span><span class="n">python</span><span class="w"></span>
<span class="nv">@gen</span><span class="p">.</span><span class="n">coroutine</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="n">fetch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">fetch_next_chunk</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="k">True</span><span class="err">:</span><span class="w"></span>
<span class="w">        </span><span class="n">chunk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yield</span><span class="w"> </span><span class="n">fetch_future</span><span class="w"></span>
<span class="w">        </span><span class="k">is</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"> </span><span class="k">break</span><span class="w"></span>
<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="k">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">fetch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">fetch_next_chunk</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="n">yield</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">flush</span><span class="p">()</span><span class="w"></span>
</pre></div>

<h4>Looping</h4>
<p>In native coroutines, <code>async for</code> can be used.</p>
<h4>Running in the background</h4>
<p><code>PeriodicCallback</code> is not normally used with coroutines. Instead, a coroutine can contain a <code>while True:</code> loop and use <code>tornado.gen.sleep</code>:</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">async</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">minute_loop</span><span class="ss">()</span>:<span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nv">True</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">await</span><span class="w"> </span><span class="nv">do_something</span><span class="ss">()</span><span class="w"></span>
<span class="w">        </span><span class="nv">await</span><span class="w"> </span><span class="nv">gen</span>.<span class="nv">sleep</span><span class="ss">(</span><span class="mi">60</span><span class="ss">)</span><span class="w"></span>

#<span class="w"> </span><span class="nv">Coroutines</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="nv">forever</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">generally</span><span class="w"> </span><span class="nv">started</span><span class="w"> </span><span class="nv">with</span><span class="w"></span>
#<span class="w"> </span><span class="nv">spawn_callback</span><span class="ss">()</span>.<span class="w"></span>
<span class="nv">IOLoop</span>.<span class="nv">current</span><span class="ss">()</span>.<span class="nv">spawn_callback</span><span class="ss">(</span><span class="nv">minute_loop</span><span class="ss">)</span><span class="w"></span>
</pre></div>

<p>Sometimes a more complicated loop may be desirable. For example, the previous loop runs every <code>60+N</code> seconds,
where <code>N</code> is the running time of <code>do_something()</code>. To run exactly every 60 seconds, use the interleaving pattern from above:</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">async</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">minute_loop2</span><span class="ss">()</span>:<span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nv">True</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">nxt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">gen</span>.<span class="nv">sleep</span><span class="ss">(</span><span class="mi">60</span><span class="ss">)</span><span class="w">  </span>#<span class="w"> </span><span class="nv">Start</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">clock</span>.<span class="w"></span>
<span class="w">        </span><span class="nv">await</span><span class="w"> </span><span class="nv">do_something</span><span class="ss">()</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Run</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">clock</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ticking</span>.<span class="w"></span>
<span class="w">        </span><span class="nv">await</span><span class="w"> </span><span class="nv">nxt</span><span class="w">            </span>#<span class="w"> </span><span class="k">Wait</span><span class="w"> </span><span class="nv">fot</span><span class="w"> </span><span class="nv">he</span><span class="w"> </span><span class="nv">timer</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">out</span>.<span class="w"></span>
</pre></div>

<h3>Further Reading</h3>
<p>TBD</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="how-to-divide-drones/" class="u-url">How to divide drones for mining minerals</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="how-to-divide-drones/" rel="bookmark">
            <time class="published dt-published" datetime="2020-07-28T19:22:30-06:00" itemprop="datePublished" title="2020-07-28 19:22">2020-07-28 19:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let's learn to order our workers to gather some resources closest to them!</p>
<p><a href="https://github.com/TorchCraft/TorchCraft/">TorchCraft</a> is a <a href="https://bwapi.github.io/">BWAPI</a> module that sends StarCraft: Brood War data out over a <a href="https://zeromq.org">ZMQ</a> connection.
This lets you parse game data and interact with the Brood War API from anywhere.</p>
<p>This tutorial will walk you through start the game for the first time after <a href="https://spacebeam.org/2020/07/09/how-to-install-torchcraft-and-set-up-a-programming-environment-on-linux/">installing the environment</a>,
we are going to dive into TorchCraft's Python API and its provided <a href="https://github.com/TorchCraft/TorchCraft/blob/master/examples/py/example.py">example.py</a>, learn to train a SCV, gather minerals, build a refinery and start harvesting-gas!</p>
<p>Let's start the game and learn a bit more about TorchCraft a general overview can be found in:</p>
<p>Synnaeve, G., Nardelli, N., Auvolat, A., Chintala, S., Lacroix, T., Lin, Z.,
Richoux, F. and Usunier, N., 2016. <em>TorchCraft: a Library for Machine Learning Research
on Real-Time Strategy Games</em> - <a href="https://arxiv.org/abs/1611.00625">arXiv:1611.00625</a>.</p>
<h3>Step 0 - Build a <code>launcher.py</code> script</h3>
<div class="code"><pre class="code literal-block">cd /opt/StarCraft
</pre></div>

<div class="code"><pre class="code literal-block">wine bwheadless.exe -e /opt/StarCraft/StarCraft.exe\
 -l /opt/StarCraft/bwapi-data/BWAPI.dll --host\
 --name Blueberry --game Blueberry --race T\
 --map maps/TorchUp/\(4\)FightingSpirit1.3.scx&amp;\
wine Chaoslauncher/Chaoslauncher.exe
</pre></div>

<p>That is what we are actually executing, let's build a <code>launcher.py</code> script.</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="c1">#!/usr/bin/env python3</span>

<span class="c1"># Run bwheadless.exe and Chaoslauncher.exe from here!</span>

<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">'host a game with bwheadless'</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-p'</span><span class="p">,</span> <span class="s1">'--path'</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="s1">'/opt/StarCraft/'</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">'StarCraft path'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-b'</span><span class="p">,</span> <span class="s1">'--bot'</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="s1">'Blueberry'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-r'</span><span class="p">,</span> <span class="s1">'--race'</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="s1">'Terran'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'--map'</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                    <span class="n">default</span><span class="o">=</span><span class="s1">'\(4\)FightingSpirit1.3.scx'</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="n">execute</span> <span class="o">=</span> <span class="s1">'''</span>
<span class="s1">wine bwheadless.exe -e </span><span class="si">{0}</span><span class="s1">StarCraft.exe</span><span class="se">\</span>
<span class="s1"> -l </span><span class="si">{0}</span><span class="s1">bwapi-data/BWAPI.dll --host</span><span class="se">\</span>
<span class="s1"> --name </span><span class="si">{1}</span><span class="s1"> --game </span><span class="si">{1}</span><span class="s1"> --race </span><span class="si">{2}</span><span class="se">\</span>
<span class="s1"> --map maps/TorchUp/</span><span class="si">{3}</span><span class="s1">&amp;</span><span class="se">\</span>
<span class="s1">wine Chaoslauncher/Chaoslauncher.exe</span>
<span class="s1">'''</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">bot</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">race</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> <span class="n">args</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>

<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">execute</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

<p>Start the original example again and run <code>launcher.py</code> to see what gives?</p>
<h4>Run the original <code>example.py</code>
</h4>
<div class="code"><pre class="code literal-block">$ python3 /usr/src/TorchCraft/examples/py/example.py -t <span class="m">127</span>.0.0.1
</pre></div>

<h4>Run the <code>launcher.py</code> script</h4>
<div class="code"><pre class="code literal-block">$ python3 /usr/src/starcraft-sif/examples/launcher.py
</pre></div>

<p>If everything works as expected, you will see <code>Chaoslauncher</code>, the first time it will ask for the location of <code>StarCraft.exe</code>, you will find it on <code>/opt/StarCraft/</code> confirm and it will ask probably to restart <code>Chaoslauncher.exe</code>, kill the current session with <code>Control-C</code> in the terminal where you start <code>launcher.py</code> and run it again.</p>
<div class="code"><pre class="code literal-block">$ python3 /usr/src/starcraft-sif/examples/launcher.py
</pre></div>

<p>{% img [class name(s)] /images/1.png %}</p>
<p>Now with Chaoslauncher ready, enable the <code>BWAPI 4.2.0 [RELEASE]</code> and and <code>W-MODE</code> plugins and click on <code>Start</code> hopefully that will launch the game on your new environment, check <code>Multiplayer -&gt; Local PC</code> and confirm that you see <code>Blueberry</code> waiting in the lobby.</p>
<p>{%img [class name(s)] /images/2.png %}</p>
<p>{%img [class name(s)] /images/3.png %}</p>
<h3>Step 1 - What is TorchCraft again?</h3>
<p>{%img [class name(s)] /images/4.png %}</p>
<p>TorchCraft is a library that enables machine learning research in the real-time strategy game of StarCraft: Brood War, by making easier to control the game from a machine learning framework, here <a href="https://pytorch.org">PyTorch</a>.</p>
<p>TorchCraft advocate to have not only the pixels as input and keyboard/mouse for commands, but also a structured representation of the game state. This makes it easier to try a broad variety of models.</p>
<p>StarCraft: Brood War is a highly competitive game with professional players, which provides interesting datasets, human feedback, and a good benchmark of what is possible to achieve within the game.</p>
<h4>BWAPI</h4>
<p>BWAPI is a programming interface written in C++ which allows users to read data and send game commands to a StarCraft: Brood War game client. BWAPI contains all functionality necessary for the creation of a competitive bot. Examples of BWAPI functionality are:</p>
<ul>
<li>Perform unit actions, i.e: <code>Attack</code>, <code>Move</code>, <code>Build</code>
</li>
<li>Obtain current data about any visible unit, such as: <code>Position</code>, <code>HP</code>, <code>Energy</code>
</li>
<li>Obtain offline data about any unit type, such as: <code>MaxSpeed</code>, <code>Damage</code>, <code>MaxHP</code>, <code>Size</code>
</li>
</ul>
<p>Programs written with BWAPI alone are usually compiled into a Windows dynamically linked library (DLL) which is injected into the game. BWAPI allows the user to perform any of the aboce functionality while the game is running, after each logic frame update within the game's software.</p>
<p>After each logic frame, BWAPI interrupts the StarCraft process and allows the user to read game data and issue commands, which are stored in a queue to be executed during the game's next logic frame.</p>
<h4>TorchCraft Design</h4>
<p>TorchCraft connects Torch to BWAPI low level interface to StarCraft: Brood War. TorchCraft's approach is to dynamically inject a piece of code in the game engine that will be a server. This server sends the state of the game to a client, and receives commands to send to the game.</p>
<p>The two modules are entirely asynchronous. TorchCraft execution model inject a DLL that provides the game interface to the bots, and one that includes all the instructions to communicate with the external client, interpreted by the game as player (or bot AI).</p>
<p>The server starts at the beginning of the match and stops when that ends.</p>
<p>TorchCraft is seen by the AI programmer as a library that provides: <code>connect()</code>, <code>receive()</code> to get the state, <code>send(commands)</code>, and some helper functions about specifics of StarCraft's rules and state representation.</p>
<div class="code"><pre class="code literal-block"><span class="o">:::</span><span class="n">lua</span><span class="w"></span>
<span class="c1">-- main game engine loop:</span><span class="w"></span>
<span class="c1">-- it acts as the server for our TorchCraft bot client to `connect`, `receive` and `send(commands)`</span><span class="w"></span>
<span class="k">while</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="k">do</span><span class="w"></span>
<span class="w">    </span><span class="n">game</span><span class="p">.</span><span class="n">receive_player_actions</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="n">game</span><span class="p">.</span><span class="n">compute_dynamics</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="c1">-- our injected code:</span><span class="w"></span>
<span class="w">    </span><span class="n">torchcraft</span><span class="p">.</span><span class="n">send_state</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="n">torchcraft</span><span class="p">.</span><span class="n">receive_actions</span><span class="p">()</span><span class="w"></span>
<span class="k">end</span><span class="w"></span>
</pre></div>

<p>A simplified client/server model that runs in the game engine (server, on top) and the machine learning framework (client, on the bottom).</p>
<div class="code"><pre class="code literal-block"><span class="o">:::</span><span class="n">lua</span><span class="w"></span>
<span class="c1">-- ilustrates a TorchCraft bot using the Lua client to `connect`, `receive` and `send(commands)`</span><span class="w"></span>
<span class="c1">-- it acts as the machine learning client where we can integrate Torch7 to return in-game actions</span><span class="w"></span>
<span class="n">tc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">require</span><span class="p">(</span><span class="s1">'torchcraft'</span><span class="p">)</span><span class="w"></span>
<span class="n">featurize</span><span class="p">,</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">init</span><span class="p">()</span><span class="w"></span>
<span class="n">tc</span><span class="o">:</span><span class="n">connect</span><span class="p">(</span><span class="k">port</span><span class="p">)</span><span class="w"></span>
<span class="k">while</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">game_ended</span><span class="w"> </span><span class="k">do</span><span class="w"></span>
<span class="w">    </span><span class="n">tc</span><span class="o">:</span><span class="n">receive</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="n">features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">featurize</span><span class="p">(</span><span class="n">tc</span><span class="p">.</span><span class="n">state</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="o">:</span><span class="n">forward</span><span class="p">(</span><span class="n">features</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">tc</span><span class="o">:</span><span class="n">send</span><span class="p">(</span><span class="n">tc</span><span class="o">:</span><span class="n">tocommand</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span><span class="w"></span>
<span class="k">end</span><span class="w"></span>
</pre></div>

<p>TorchCraft also provides an efficient way to store game frames data from past games so that existing replays can be re-examined.</p>
<p>TorchCraft is a library that enables machine learning reserch on real game data by interfacing PyTorch with StarCraft: Brood War.</p>
<h3>Step 2 - Analyzing TorchCraft <code>example.py</code>
</h3>
<p>What is TorchCraft's <a href="https://github.com/TorchCraft/TorchCraft/blob/master/examples/py/example.py">example.py</a> actually doing?</p>
<div class="code"><pre class="code literal-block"><span class="p">:::</span><span class="n">python</span>
<span class="kn">import</span> <span class="nn">torchcraft</span> <span class="k">as</span> <span class="nn">tc</span>
<span class="kn">import</span> <span class="nn">torchcraft.Constants</span> <span class="k">as</span> <span class="nn">tcc</span>
</pre></div>

<p>Get closest function, very self explanatory!</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">def</span><span class="w"> </span><span class="nv">get_closest</span><span class="ss">(</span><span class="nv">x</span>,<span class="w"> </span><span class="nv">y</span>,<span class="w"> </span><span class="nv">units</span><span class="ss">)</span><span class="w"></span>
<span class="w">    </span><span class="nv">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">float</span><span class="ss">(</span><span class="s1">'inf'</span><span class="ss">)</span><span class="w"></span>
<span class="w">    </span><span class="nv">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">None</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">units</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">x</span><span class="ss">)</span><span class="o">**</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="o">**</span><span class="mi">2</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">dist</span>:<span class="w"></span>
<span class="w">            </span><span class="nv">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">d</span><span class="w"></span>
<span class="w">            </span><span class="nv">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">unit</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">u</span><span class="w"></span>
</pre></div>

<p>TorchCraft Python API client initial setup</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tc</span>.<span class="nv">Client</span><span class="ss">()</span><span class="w"></span>
<span class="nv">client</span>.<span class="k">connect</span><span class="ss">(</span><span class="nv">hostname</span>,<span class="w"> </span><span class="nv">port</span><span class="ss">)</span><span class="w"></span>
#<span class="w"> </span><span class="nv">Initial</span><span class="w"> </span><span class="nv">setup</span><span class="w"></span>
<span class="nv">client</span>.<span class="k">send</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">    </span>[<span class="nv">tcc</span>.<span class="nv">set_speed</span>,<span class="w"> </span><span class="mi">0</span>],<span class="w"></span>
<span class="w">    </span>[<span class="nv">tcc</span>.<span class="nv">set_gui</span>,<span class="w"> </span><span class="mi">1</span>],<span class="w"></span>
<span class="w">    </span>[<span class="nv">tcc</span>.<span class="nv">set_cmd_optim</span>,<span class="w"> </span><span class="mi">1</span>],<span class="w"></span>
]<span class="ss">)</span><span class="w"></span>
</pre></div>

<blockquote>
<p>Plays simple micro battles with an attack closest heuristic</p>
</blockquote>
<p>{%img [class name(s)] /images/5.png %}</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="k">while</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">game_ended</span>:<span class="w"></span>
<span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="nv">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span>.<span class="nv">recv</span><span class="ss">()</span><span class="w"></span>
<span class="w">    </span><span class="nv">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[]<span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">game_ended</span>:<span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">units</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">units</span>[<span class="mi">0</span>]<span class="w"></span>
<span class="w">        </span><span class="nv">enemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">units</span>[<span class="mi">1</span>]<span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">units</span>:<span class="w"></span>
<span class="w">            </span><span class="nv">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">get_closest</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">x</span>,<span class="w"> </span><span class="nv">unit</span>.<span class="nv">y</span>,<span class="w"> </span><span class="nv">enemy</span><span class="ss">)</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nv">target</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">None</span>:<span class="w"></span>
<span class="w">                </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">                    </span><span class="nv">tcc</span>.<span class="nv">command_unit_protected</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Attack_Unit</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">target</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">                </span>]<span class="ss">)</span><span class="w"></span>
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"Sending actions: {}"</span>.<span class="nv">format</span><span class="ss">(</span><span class="nv">str</span><span class="ss">(</span><span class="nv">actions</span><span class="ss">)))</span><span class="w"></span>
<span class="w">    </span><span class="nv">client</span>.<span class="k">send</span><span class="ss">(</span><span class="nv">actions</span><span class="ss">)</span><span class="w"></span>
<span class="nv">client</span>.<span class="nv">close</span><span class="ss">()</span><span class="w"></span>
</pre></div>

<p>The TorchCraft API is a layer of abstraction on top of BWAPI, we don't interact with BWAPI directly, this is the biggest difference if compared with common C++ or Java bots.</p>
<h3>Step 3 - Minerals and Vespene Gas</h3>
<p>Workers mine 8 minerals per trip. Minerals are the more important of the two physical resources, for all units produces from buildings or larvae require at least some minerals to be produced, while more basic units and structures do not require <code>Vespene Gas</code>. In addition, gas harvesting is possible only by building a gas-extracting structure on a geyser (<code>Extractor</code> for <code>Zerg</code>, <code>Refinery</code> for <code>Terran</code> and <code>Assimilator</code> for <code>Protoss</code>).</p>
<p>{%img [class name(s)] /images/6.png %}</p>
<h4>Run <code>gathering.py</code> example</h4>
<div class="code"><pre class="code literal-block">$ python3 /usr/src/starcraft-sif/examples/gathering.py
</pre></div>

<h4>Run <code>launcher.py</code> script</h4>
<div class="code"><pre class="code literal-block">$ python3 /usr/src/starcraft-sif/examples/launcher.py
</pre></div>

<h4>Train a SCV</h4>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">units</span>:<span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">isbuilding</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">type</span><span class="ss">)</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">tc</span>.<span class="nv">Constants</span>.<span class="nv">unittypes</span>.<span class="nv">_dict</span>[<span class="nv">unit</span>.<span class="nv">type</span>]\<span class="w"></span>
<span class="w">     </span><span class="o">==</span><span class="w"> </span><span class="s1">'Terran_Command_Center'</span>:<span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">producing</span>\<span class="w"></span>
<span class="w">         </span><span class="nv">and</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">frame</span>.<span class="nv">resources</span>[<span class="nv">bot</span>[<span class="s1">'id'</span>]].<span class="nv">ore</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">50</span>\<span class="w"></span>
<span class="w">         </span><span class="nv">and</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">frame</span>.<span class="nv">resources</span>[<span class="nv">bot</span>[<span class="s1">'id'</span>]].<span class="nv">used_psi</span>\<span class="w"></span>
<span class="w">         </span><span class="o">!=</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">frame</span>.<span class="nv">resources</span>[<span class="nv">bot</span>[<span class="s1">'id'</span>]].<span class="nv">total_psi</span>:<span class="w"></span>
<span class="w">            </span>#<span class="w"> </span><span class="nv">Target</span>,<span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">            </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">                </span><span class="nv">tcc</span>.<span class="nv">command_unit_protected</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Train</span>,<span class="w"></span>
<span class="w">                </span><span class="mi">0</span>,<span class="w"></span>
<span class="w">                </span><span class="mi">0</span>,<span class="w"></span>
<span class="w">                </span><span class="mi">0</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">tc</span>.<span class="nv">Constants</span>.<span class="nv">unittypes</span>.<span class="nv">Terran_SCV</span>,<span class="w"></span>
<span class="w">            </span>]<span class="ss">)</span><span class="w"></span>
<span class="w">            </span>#<span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">train</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">MUST</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="s2">"extra"</span><span class="w"> </span><span class="nv">field</span><span class="w"></span>
<span class="w">            </span><span class="nv">producing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">True</span><span class="w"></span>
</pre></div>

<h4>Gathering Minerals</h4>
<p>if all went well, the workers should now start gathering the mineral patches closest to them!</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="nv">gather</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">command2order</span>[<span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Gather</span>]<span class="w"> </span>
<span class="nv">build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">command2order</span>[<span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Build</span>]<span class="w"></span>
<span class="nv">right_click_position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">command2order</span>[<span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Right_Click_Position</span>]<span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="nv">order</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">unit</span>.<span class="nv">orders</span>:<span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">order</span>.<span class="nv">type</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">gather</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">order</span>.<span class="nv">type</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">build</span>\\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">order</span>.<span class="nv">type</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">right_click_position</span>\<span class="w"> </span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">building_refinery</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">get_closest</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">x</span>,<span class="w"> </span><span class="nv">unit</span>.<span class="nv">y</span>,<span class="w"> </span><span class="nv">neutral</span><span class="ss">)</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nv">target</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">None</span>:<span class="w"></span>
<span class="w">            </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">                </span><span class="nv">tcc</span>.<span class="nv">command_unit_protected</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Right_Click_Unit</span>,<span class="w"></span>
<span class="w">                </span><span class="nv">target</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">            </span>]<span class="ss">)</span><span class="w"></span>
</pre></div>

<p>Don't expect an optimal spread of workers, but that is left as an exercise.</p>
<h4>Build a Refinery</h4>
<p>We Require More Vespene Gas</p>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>

<span class="nv">vespene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Resource_Vespene_Geyser'</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">isworker</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">type</span><span class="ss">)</span>:<span class="w"></span>
<span class="w">    </span><span class="nv">workers</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">id</span><span class="ss">)</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">state</span>.<span class="nv">frame</span>.<span class="nv">resources</span>[<span class="nv">bot</span>[<span class="s1">'id'</span>]].<span class="nv">ore</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">building_refinery</span>:<span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">nu</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">neutral</span>:<span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nv">tcc</span>.<span class="nv">unittypes</span>.<span class="nv">_dict</span>[<span class="nv">nu</span>.<span class="nv">type</span>]<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">vespene</span>:<span class="w"></span>
<span class="w">                </span><span class="nv">gas_harvesting</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">id</span><span class="ss">)</span><span class="w"></span>
<span class="w">                </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">                    </span><span class="nv">tcc</span>.<span class="nv">command_unit</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Build</span>,<span class="w"></span>
<span class="w">                    </span><span class="o">-</span><span class="mi">1</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">nu</span>.<span class="nv">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">nu</span>.<span class="nv">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">4</span>,<span class="w"></span>
<span class="w">                    </span><span class="nv">tcc</span>.<span class="nv">unittypes</span>.<span class="nv">Terran_Refinery</span>,<span class="w"></span>
<span class="w">                </span>]<span class="ss">)</span><span class="w"></span>
<span class="w">                </span><span class="nv">building_refinery</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">True</span><span class="w"></span>
</pre></div>

<h4>Gas harvesting</h4>
<div class="code"><pre class="code literal-block">:::<span class="nv">python</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="nv">building_refinery</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">gas_harvesting</span>[<span class="mi">0</span>]<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">unit</span>.<span class="nv">id</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">gas_harvesting</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">refinery</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">gas_harvesting</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">id</span><span class="ss">)</span><span class="w"></span>
<span class="w">        </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">            </span><span class="nv">tcc</span>.<span class="nv">command_unit_protected</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Right_Click_Unit</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">refinery</span><span class="w"></span>
<span class="w">        </span>]<span class="ss">)</span><span class="w"></span>
<span class="nv">elif</span><span class="w"> </span><span class="nv">refinery</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">gas_harvesting</span>[<span class="mi">0</span>]<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">unit</span>.<span class="nv">id</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">gas_harvesting</span>[<span class="mi">1</span>]<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">unit</span>.<span class="nv">id</span>\<span class="w"></span>
<span class="w">     </span><span class="nv">and</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">gas_harvesting</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span>:<span class="w"></span>
<span class="w">        </span><span class="nv">gas_harvesting</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">unit</span>.<span class="nv">id</span><span class="ss">)</span><span class="w"></span>
<span class="w">        </span><span class="nv">actions</span>.<span class="nv">append</span><span class="ss">(</span>[<span class="w"></span>
<span class="w">            </span><span class="nv">tcc</span>.<span class="nv">command_unit_protected</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">unit</span>.<span class="nv">id</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">tcc</span>.<span class="nv">unitcommandtypes</span>.<span class="nv">Right_Click_Unit</span>,<span class="w"></span>
<span class="w">            </span><span class="nv">refinery</span><span class="w"></span>
<span class="w">        </span>]<span class="ss">)</span><span class="w"></span>
</pre></div>

<h3>Further Reading</h3>
<p>Here is a link to the complete <a href="https://github.com/spacebeam/starcraft-sif/blob/master/examples/gathering.py">gathering.py</a> script if you are just curious,
Next we will <a href="https://spacebeam.org/2020/07/11/8-supply-11-gas-12-rax-14-scout/">train different units</a> to improve our Terran skills!</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="howto-build/" class="u-url">Build a Wall &amp; Lings Will Fall</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="howto-build/" rel="bookmark">
            <time class="published dt-published" datetime="2020-07-13T18:37:04-06:00" itemprop="datePublished" title="2020-07-13 18:37">2020-07-13 18:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Now that we are training our workers, eventually we'll be running out of supply.</p>
<blockquote>
<p>Workers are often weak in fights compared to other units.</p>
</blockquote>
<p>Players gather resources to build units and defeat their opponents. To that end, they often have worker units
(and extraction structures) that can gather resources needed to build workers, buildings, other units and research upgrades.</p>
<p>Buldings and research define technology trees (directed acyclic graphs) and each state of a tech tree allow for the production of different unit types 
and the training of new unit abilities.</p>
<p>An opening denotes the same thing as in Chess: an early game plan for which the player has to make choices.</p>
<p>That is the case in Chess because one can move only one piece at a time (each turn), and in StarCraft because,
during the early game phase, one is economically limited and has to choose which tech paths to pursue.</p>
<p>Available resources constrain the technology advancement and the number of units one can produce. As producing buildings
and units also take time, the arbitrage between investing in the economy, in technological advancements, and in units production
is the crux of the strategy during the whole game.</p>
<h3>opening</h3>
<p>In StarCraft an opening refer to the initial moves of a game. The term can refer to the initial moves by either side, but an opening by Zerg may also be known as <em>defense</em>. 
There are dozens of different openings, and hundreds of variants. These vary widely in character from quiet positional play to wild tactical play.</p>
<p>In addition to referring to specific move sequences, the opening is the first phase of a game, the other phases being the middlegame and the endgame.</p>
<p>Opening moves that are considered standard are referred to as "book moves". Reference works often present move sequnces in simple algebraic notation, opening trees or theory tables. When a game begins to deviate deom known, opening theory, the players are said to be "out of the book".</p>
<p>Professional players spend yers studying openings, and continue doing so throughout their careers, as opening theory continues to evolve.</p>
<p>The study of openings can become unbalanced if it is to the exclusion of tactical training and middlegame and endgame strategy.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="how-to-install-torchcraft/" class="u-url">How To Install TorchCraft and Setup a Programming Environment on Linux</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="how-to-install-torchcraft/" rel="bookmark">
            <time class="published dt-published" datetime="2020-07-09T19:50:52-06:00" itemprop="datePublished" title="2020-07-09 19:50">2020-07-09 19:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>TorchCraft is a BWAPI module that sends StarCraft data out over a ZMQ connection. This lets you parse game data and interact with BWAPI.</p>
<p>{% img [class name(s)] /images/python.jpg %}</p>
<p>Python is an interpreted, high-level, general-purpose programming language with strengths in automation, data analysis and machine learning.</p>
<p>This tutorial will walk you through installing Python 3 and setting up a programming environment on Debian 10.</p>
<h3>Step 0 - Update and Upgrade</h3>
<p>Logged into your system as root, first update and upgrade to ensure your shipped version of Python 3 is up-to-date.</p>
<div class="code"><pre class="code literal-block">apt update
</pre></div>

<div class="code"><pre class="code literal-block">apt upgrade
</pre></div>

<p>Confirm upgrade when prompted to do so.</p>
<h3>Step 1 - Check Version of Python</h3>
<p>Check your version of Python 3 installed by typing:</p>
<div class="code"><pre class="code literal-block">python3 --version
</pre></div>

<p>You'll receive output similar to the following.</p>
<div class="code"><pre class="code literal-block">Python 3.7.3
</pre></div>

<h3>Step 2 - Install pip</h3>
<p>To manage software packages for Python, install <code>pip</code>, the standard package installer for Python. You can use pip to install things from the official package index and other indexes. </p>
<div class="code"><pre class="code literal-block">apt install -y python3-pip
</pre></div>

<p>Python packages can be installed by typing:</p>
<div class="code"><pre class="code literal-block">pip3 install schematics 
</pre></div>

<p>Here, <code>schematics</code> can refer to any Python package, such as tornado for backend development or NumPy for scientific computing. </p>
<h3>Step 3 - Install Additional Tools</h3>
<p>There are a few more packages and development tools to install to ensure that we have a robust set-up for our StarCraft: Brood War Python TorchCraft bots programming environment:</p>
<div class="code"><pre class="code literal-block">apt -y install --install-recommends vim git apt-transport-https\
 gnupg2 wget software-properties-common curl build-essential\
 gfortran sudo pkg-config make cmake libyaml-0-2 libyaml-dev
</pre></div>

<div class="code"><pre class="code literal-block">dpkg --add-architecture i386
</pre></div>

<div class="code"><pre class="code literal-block">apt-add-repository contrib 
</pre></div>

<div class="code"><pre class="code literal-block">apt -y install --install-recommends libgnutls30:i386 libldap-2.4-2:i386\
 libgpg-error0:i386 libxml2:i386 libasound2-plugins:i386 libsdl2-2.0-0:i386\
 libfreetype6:i386 libdbus-1-3:i386 libsqlite3-0:i386 libgl1-mesa-glx:i386\
 libgl1-mesa-dri:i386 libsdl2-2.0-0 libstb0 libstb0:i386 mesa-vulkan-drivers
</pre></div>

<h3>Step 4 - Add the WineHQ Debian repository</h3>
<p>Get and install the repository key.</p>
<div class="code"><pre class="code literal-block">wget -nc https://dl.winehq.org/wine-builds/winehq.key &amp;&amp; apt-key add winehq.key
</pre></div>

<div class="code"><pre class="code literal-block">apt-add-repository 'deb https://dl.winehq.org/wine-builds/debian/ buster main'
</pre></div>

<div class="code"><pre class="code literal-block">apt update &amp;&amp; rm winehq.key
</pre></div>

<h3>Step 5 - Install libfaudio0 and Wine</h3>
<p>Starting on Wine &gt;= 4.5, libfaudio0 is required by the staging packages provided by WineHQ but is not included in the Wine HQ packages, which means you are responsible for making libfaudio0 available prior to installing Wine. This explains how to obtain libfaudio0 for Debian 10.</p>
<div class="code"><pre class="code literal-block"><span class="n">wget</span><span class="w"> </span><span class="o">-</span><span class="n">nc</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">opensuse</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">Emulators</span><span class="p">:</span><span class="o">/</span><span class="n">Wine</span><span class="p">:</span><span class="o">/</span><span class="n">Debian</span><span class="o">/</span><span class="n">Debian_10</span><span class="o">/</span><span class="n">amd64</span><span class="o">/</span><span class="n">libfaudio0_20</span><span class="o">.</span><span class="mi">01</span><span class="o">-</span><span class="mi">0</span><span class="o">~</span><span class="n">buster_amd64</span><span class="o">.</span><span class="n">deb</span><span class="w"></span>
</pre></div>

<div class="code"><pre class="code literal-block"><span class="n">wget</span><span class="w"> </span><span class="o">-</span><span class="n">nc</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">opensuse</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">Emulators</span><span class="p">:</span><span class="o">/</span><span class="n">Wine</span><span class="p">:</span><span class="o">/</span><span class="n">Debian</span><span class="o">/</span><span class="n">Debian_10</span><span class="o">/</span><span class="n">i386</span><span class="o">/</span><span class="n">libfaudio0_20</span><span class="o">.</span><span class="mi">01</span><span class="o">-</span><span class="mi">0</span><span class="o">~</span><span class="n">buster_i386</span><span class="o">.</span><span class="n">deb</span><span class="w"></span>
</pre></div>

<div class="code"><pre class="code literal-block">dpkg -i libfaudio0_20.01-0~buster_amd64.deb
</pre></div>

<div class="code"><pre class="code literal-block">dpkg -i libfaudio0_20.01-0~buster_i386.deb
</pre></div>

<div class="code"><pre class="code literal-block">apt -y install --install-recommends winehq-staging winetricks
</pre></div>

<h3>Step 6 - Configuring WINE</h3>
<p>Many programs work under WINE with absolutely no configuration.. unfortunately, this isn't always the case.</p>
<h4>(default) using your own <code>non-root</code> user</h4>
<p>The following commands MUST be executed as a normal non-root user, if you already have an existing wine setup, you can <em>REMOVE</em> it and start clean with <code>rm -rf ~/.wine/</code></p>
<div class="code"><pre class="code literal-block">$ <span class="nv">WINEARCH</span><span class="o">=</span>win32<span class="p">;</span> wineboot
</pre></div>

<div class="code"><pre class="code literal-block">$ winetricks -q vcrun2012
</pre></div>

<div class="code"><pre class="code literal-block">$ winetricks -q vcrun2013
</pre></div>

<div class="code"><pre class="code literal-block">$ winetricks -q vcrun2015
</pre></div>

<h4>(optional) using a separate <code>wine</code> user</h4>
<div class="code"><pre class="code literal-block">adduser --disabled-login --gecos "" --shell /forbid/login wine
</pre></div>

<div class="code"><pre class="code literal-block">usermod --append --groups audio wine
</pre></div>

<div class="code"><pre class="code literal-block">chown wine:wine -R /home/wine
</pre></div>

<div class="code"><pre class="code literal-block">sudo -u wine env HOME=/home/wine USER=wine USERNAME=wine LOGNAME=wine WINEARCH=win32 wineboot
</pre></div>

<div class="code"><pre class="code literal-block">sudo -u wine env HOME=/home/wine USER=wine USERNAME=wine LOGNAME=wine winetricks -q vcrun2012
</pre></div>

<div class="code"><pre class="code literal-block">sudo -u wine env HOME=/home/wine USER=wine USERNAME=wine LOGNAME=wine winetricks -q vcrun2013
</pre></div>

<div class="code"><pre class="code literal-block">sudo -u wine env HOME=/home/wine USER=wine USERNAME=wine LOGNAME=wine winetricks -q vcrun2015
</pre></div>

<h3>Step 7 - StarCraft: Brood War 1.16.1</h3>
<p>At the moment StarCraft: Remastered is <em>NOT</em> yet supported, the only working version is 1.16.1.</p>
<div class="code"><pre class="code literal-block">git clone https://github.com/spacebeam/starcraft-sif.git /usr/src/starcraft-sif
</pre></div>

<p>In this tutorial we have StarCraft installed in <code>/opt/StarCraft/</code></p>
<div class="code"><pre class="code literal-block"><span class="nv">cat</span><span class="w"> </span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">src</span><span class="o">/</span><span class="nv">starcraft</span><span class="o">-</span><span class="nv">sif</span><span class="o">/</span><span class="k">include</span><span class="o">/</span><span class="nv">core</span><span class="o">/</span><span class="nv">core</span><span class="o">*</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="nv">opt</span><span class="o">/</span><span class="nv">StarCraft</span>.<span class="nv">tar</span>.<span class="nv">gz</span><span class="w"></span>
</pre></div>

<div class="code"><pre class="code literal-block">tar -zxvf /opt/StarCraft.tar.gz -C /opt/
</pre></div>

<h4>Installing the provided Python examples</h4>
<p>This will install Tornado, PyTorch, PyZMQ, NumPy and SciPy!</p>
<div class="code"><pre class="code literal-block">pip3 install -r /usr/src/starcraft-sif/examples/blueberry/requirements.txt
</pre></div>

<h4>Installing TorchCraft</h4>
<div class="code"><pre class="code literal-block">git clone https://github.com/TorchCraft/TorchCraft.git /usr/src/TorchCraft --recursive
</pre></div>

<div class="code"><pre class="code literal-block">pip3 install /usr/src/TorchCraft
</pre></div>

<h3>Step 8 - Coding &amp; Building</h3>
<p>Lets continue this tutorial with the ambitious goal of create a small Terran bot with a single timing attack, but first.. check that everything is installed correctly and that we can run the original examples.</p>
<div class="code"><pre class="code literal-block">python3 /usr/src/TorchCraft/examples/py/example.py -t 127.0.0.1
</pre></div>

<p>if you follow the steps your output read hopefully:</p>
<div class="code"><pre class="code literal-block">CTRL-C to stop
</pre></div>

<p>You are ready to start a new Brood War bot using Python on Linux, we hope this tutorial provide a good start, after this short success.. learn how to run the game and <a href="https://spacebeam.org/2020/07/10/gather-minerals-train-a-worker-build-a-refinery-and-extract-vespene-gas/">gather resources</a> growing a Terran economy. </p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="stage-2-supervision/" class="u-url">Stage 2 Supervision</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="stage-2-supervision/" rel="bookmark">
            <time class="published dt-published" datetime="2020-07-06T17:18:50-06:00" itemprop="datePublished" title="2020-07-06 17:18">2020-07-06 17:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>A collection of tools for managing UNIX services.. Supervision means the system will restart the process immediately if it crash for some reason!</p>
<p>At its core, <a href="http://smarden.org/runit/">runit</a> is a process supervision suite.</p>
<p>The concept of process supervision comes from several observations:</p>
<ul>
<li>UNIX systems, even minimalistic ones, need to run long-lived processes, aka daemons.</li>
</ul>
<p>That one is the core design principle of UNIX: one service -&gt; one daemon.</p>
<ul>
<li>Daemons can die at all times. Maybe they are missing a vital resource and cannot handle certain failure;</li>
<li>Automatically restarting daemons when they die is generally a good thing.</li>
</ul>
<p>A process supervision system organizes the process hierarchy in a radical different way.</p>
<ul>
<li>A process supervision system starts independent hierarchy of processes at boot time, called a supervision tree.</li>
<li>Your daemon is identified by the specific directory which contains all the information about it; then you send a message to the supervision tree. The supervision tree start the daemon as a leaf.</li>
<li>The parent of your daemon is a supervisor. Since your daemon is its direct child, the supervisor always knows the correct PID of your daemon.</li>
<li>To send signals to your daemons, you send a message to its supervisor, which will then send the signal to the daemon in your behalf.</li>
</ul>
<p>The design of <code>runit</code> takes a very familiar approach by breaking down functionality into several small utilities responsible for a single task.</p>
<p>This approach allows the simple components to be composed in various ways to suit our needs. </p>
<p>The core runit utilities are <code>runsvdir</code>, <code>runsv</code>, <code>chpst</code>, <code>svlogd</code>, and <code>sv</code>.</p>
<h3>Service supervision</h3>
<p>Each service is associated with a service directory, and each service daemon runs as a child process of a supervising <code>runsv</code> process runing in this directory.</p>
<p>The <code>runsv</code> program provides a reliable interface for signalling the service daemon and controlling the service and supervisor.</p>
<p>Normally the <code>sv</code> program is used to send commands throught this interface, and to query status information about the service.</p>
<p>The <code>runsv</code> program supervises the corresponding service daemon. By default a service is defined to be up, that means, if the service daemon dies, will be restarted. Of course you can tell it otherwise.</p>
<p>The promise is that this reliable interface to control daemons and supervisors obsolete pid-guessing programs, such as pidoff, killall, start-stop-daemon, which, due to guessing are prone to failures by design.</p>
<p>It also obsoletes so called pid-files, no need for each and every service daemon to include code to daemonize, to write the new process id into a file, and to take care that file is removed properly on shutdown, which might be very difficult in case of a crash!</p>
<h3>Clean process state</h3>
<p><code>runit</code> guarantees each service a clean process state, no matter if the service is activated for the first time or automatically at boot time, reactivated, or simply restarted. This means that the service always is started with the same environment, resource limits, open file descriptors, and controlling terminals.</p>
<h3>Reliable logging facility</h3>
<p>The <code>runsv</code> program provides a reliable logging facility for the service daemon. If configured, <code>runsv</code> creates a pipe, starts and supervises an additional log service, redirects the log daemon's standard input to read from the pipe, and redirects the service daemon's standard output to write to the pipe.</p>
<p>Restarting the service does not require restarting the log service, and vice versa.</p>
<p>A good choice for log daemon is runit's service logging daemon <code>svlogd</code>.</p>
<p>The service daemon and log daemon run with different process states and can run under different user id's.</p>
<h3>Stage 2</h3>
<p>Stage 2 handles the systems's uptime tasks (via the <code>runsvdir</code> program) and is running the whole system's uptime life spawn.</p>
<p>Stage 2 is portable across UNIX systems. <code>runit</code> is well suited for <a href="https://old.reddit.com/r/teslamotors/comments/arfwvm/some_sw_internals_of_tesla_autopilot_node_hw2/">autopilot nodes</a>, servers and embedded systems, and also does its job well on everyday working environments.</p>
<p>Stage 2 is packaging friendly: all software package that provides a service needs to do is to include a service directory in the package, we provide a symbolic link mechanism to this directory in <code>/etc/service/</code>. The service will be started within five seconds, and automatically at boot time.</p>
<p>The package's install and update scripts can use the reliable control interface to stop, start, restart or send signal to the service.</p>
<p>On package removal, the symbolic link simply is removed. The service will be taken down automatically.</p>
<h3>Service dependencies</h3>
<p>runit's service supervision resolves dependencies for service daemons designed to be run by a supervisor process automatically.</p>
<p>The service daemon (or the corresponding run script) should behave as follows:</p>
<ul>
<li>before providing the service, check if all services it depends on are available. If not, exit with an error, the supervisor will then try again.</li>
<li>write all logs through runit's logging facility. The <code>runsv</code> program takes care that all logs for the service are written safely to disk.</li>
<li>optionally when the service is told to become down, take down other services that depend on this one after disabling the service.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="blackboard/" class="u-url">The Seed Mechanism</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="blackboard/" rel="bookmark">
            <time class="published dt-published" datetime="2020-04-20T08:04:36-06:00" itemprop="datePublished" title="2020-04-20 08:04">2020-04-20 08:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>We are now ready to move up to a complete connection information distribution mechanism containing a number of programable modules along with the structure to program them.</p>
<p>The seed mechanism consist of a central knowledge store, a set of programmable modules, and connections between them.</p>
<p>The structure is set in a way that all of the connection information that is specific to recognition
of zergs is stored in the central knowledge store.</p>
<p>Incoming lines from the programmable module allow information in each module to access the central knowledge,
and output lines from the central knowledge store to the programmable modules allow connection activation information
to be distributed back to the modules.</p>
<p>The two programmable modules are <em>just copies</em> of the module. It is assumed that lower-level mechanisms, outside
of the model itself, are responsible for aligning inputs with the two modules, so that shown two units are presented,
the zergling activates appropriate programmable zergling units in the module, and the hydralisk activates
appropriate programmable hydralisk units in the right module.</p>
<p>In summary, the mechanism consists of </p>
<ul>
<li>(a) the programmable modules</li>
<li>(b) the central knowledge store</li>
<li>(c) converging inputs to the central knowledge store from the programmable modules</li>
<li>(d) diverging outputs from the central knowledge store back to the programmable modules</li>
</ul>
<h2>Benefits</h2>
<p>Connection information distribution allow us to instruct parallel processing structures from outside the network
making their behavior contingent on instructions originating elsewhere in the network.</p>
<p>This means, that the way a network responds to a particular input can be made contingent on the state of some other
network in the system, thereby greatly increasing the flexibility of parallel processing mechanisms.</p>
<p>Perhaps the most general way of stating the benefit of connection information distribution is to note that is in a way,
analogous to the invention of the stored program!</p>
<h2>Conclusion</h2>
<p>Using connection information distribution, we can create local copies of relevant portions of the contents of a central
knowledge store. These copies then serve as the basis for interactive processing amount the conceptual entities they
program local hardware units to represent.</p>
<p>With this mechanism, parallel distributed processing models can now be said to be able to create multiple
<em>instances</em> of the same <em>schema</em>, bound appropriately to the correct local variables, though subject to just
the same kind of crashes and errors human programmers seem to make.</p>
<p>We have not really done anything more than show how existing tools in the arsenal of parallel distributed processing
mechanisms can be used to create local copies of networks.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="what-about-the-torch-up-tournament/" class="u-url">What about the Torch Up tournament?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Spacebeam authors
            </span></p>
            <p class="dateline">
            <a href="what-about-the-torch-up-tournament/" rel="bookmark">
            <time class="published dt-published" datetime="2020-03-13T10:58:43-06:00" itemprop="datePublished" title="2020-03-13 10:58">2020-03-13 10:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Did the tournament happen? Did it complete?</p>
<p>It appears that our humans crash going after the 4th expansion and encounter some hydras. Our machine supervisors have schedule again the games for next week from the 16 to Mar 20, if humans crash again we will continue iterating, fixing and scheduling the tournament games until we have at least a first completed round following the structure of our event as stated by the published rules.</p>
<p>The results will be announced in the <code>updates</code> section of the tournament website as the rules state, we have been battling against our own technical debt, implementation and irrelevant internal details but we are commited to release and announce the tournament results as soon as they become available and make this event an annual competition with the particularity that we can meet in beutiful Brussels, once a year at FOSDEM, come for the brood war, stay for the technical conferences the Belgian beers are great and all but is all about the chocolates.</p>
<p>About the announced new maps they are relevant only for next year competition and up, a hopefully more stable event where we are learning from the iterations and the progress with our current mistakes, crashes, burns and bugs, the maps are a mix of old and new competitive maps for 2v2 and 1v1 with lots of surprises, we have no doubt they will be a challenge for map analyzers as well.</p>
<p>Good luck to all of you participating in this first Torch Up event! we hope to have the results available for you soon, and if you did not register but are curious and want to join us next year, we want to have the maps available for you as soon as possible, check out the new challenges and see you next year!</p>
    </div>
    </article>
</div>

        <ul class="pager postindexpager clearfix">
<li class="previous"><a href="index-3.html" rel="prev">Publicaciones posteriores</a></li>
            <li class="next"><a href="index-1.html" rel="next">Publicaciones anteriores</a></li>
        </ul>
<!--End of body content--><footer id="footer"><footer class="footer-20192"><div class="site-section">
        <div class="container">

          <div class="cta d-block d-md-flex align-items-center px-5">
            <div>
              <h2 class="mb-0">Ready for your next project?</h2>
              <h3 class="text-dark">Let's get started!</h3>
            </div>
            <div class="ml-auto">
              <a href="../../contact/#us" class="btn btn-dark rounded-0 py-3 px-5">Contact us</a>
            </div>
          </div>
            
          <!--
          <div class="row">

            <div class="col-md-6">HQ</div>

            <div class="col-md-6">Southeast Asia Headquarter</div>
          </div>
          -->

          <div class="row">

            <div class="col-sm">
              <h5><a href="../../#zerg" class="footer-logo">Spacebeam</a></h5>
              <p class="copyright">
                <small>© 2023</small>
              </p>
            </div>
            <div class="col-sm">
              <h5>Capabilities</h5>
              <ul class="list-unstyled links">
<li><a href="../../consultancy/#work">Consulting</a></li>
                <li><a href="../../technology/">Training</a></li>
                <li><a href="../../community/">Support</a></li>
              </ul>
</div>
            <div class="col-sm">
              <h5>Company</h5>
              <ul class="list-unstyled links">
<li><a href="../../consultancy/#work">About us</a></li>
                <li><a href="../../contact/#us">Contact us</a></li>
              </ul>
</div>
            <div class="col-sm">
              <h5>Further Information</h5>
              <ul class="list-unstyled links">
<li><a href="#">Terms &amp; Conditions</a></li>
                <li><a href="#">Privacy Policy</a></li>
              </ul>
</div>
            <div class="col-md-3">
              <h5>Follow us</h5>
              <ul class="list-unstyled social">
<li><a href="#"><span class="fa-stack fa-x2"><i class="fa fa-circle fa-stack-x1"></i><i class="fab fa-linkedin fa-stack-lg fa-inverse"></i></span></a></li>
                <li><a href="#"><span class="icon-twitter"></span></a></li>
                <li><a href="#"><span class="icon-linkedin"></span></a></li>
                <li><a href="#"><span class="icon-medium"></span></a></li>
                <li><a href="#"><span class="icon-paper-plane"></span></a></li>
              </ul>
</div>
            
          </div>
        </div>
      </div>
    </footer></footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script><script src="../../bs-jsonform.js"></script><script src="../../underscore-min.js"></script><script src="../../backbone-min.js"></script><!-- Relax, and have some fun --><script src="../../seed/fun.utils.js"></script><script src="../../seed/fun.configuration.js"></script><script src="../../seed/fun.strings.js"></script><script src="../../seed/fun.models.js"></script><!-- Project views --><script src="../../views/landing.js"></script><script src="../../views/contact.js"></script><script src="../../views/consultancy.js"></script><!-- fun router --><script src="../../seed/fun.router.js"></script>
</body>
</html>
